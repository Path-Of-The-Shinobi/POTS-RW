#POTS Character Interactions

#Mangekyo Sharingan Interactions

perform_amaterasu_interaction = {
    category = interaction_category_hostile
    common_interaction = no
    ai_maybe = no

    is_shown = {
        scope:actor = {
            has_trait = mangekyosharingan_4
            NOT = { has_character_flag = performed_amaterasu }
        }
        scope:recipient = {
            NOT = { has_character_modifier = amaterasu_modifier }
        }
    }

    on_send = {
        scope:actor = {
            trigger_event = {
                id = MangekyoEvents.001
                days = 1
            }
            add_character_flag = {
                flag = performed_amaterasu
                months = 6
            }
        }
    }
}

perform_kotoamatsukami_interaction = {
    category = interaction_category_hostile
    common_interaction = no
    ai_maybe = no

    is_shown = {
        scope:actor = {
            has_trait = mangekyosharingan_2
            NOT = { has_character_flag = recently_performed_kotoamatsukami }
        }
    }

    on_send = {
        scope:actor = {
			trigger_event = MangekyoEvents.002
			add_character_flag = {
				flag = recently_performed_kotoamatsukami
				years = 15
			}
        }
    }
}

perform_tsukuyomi_interaction = {
    category = interaction_category_hostile
    common_interaction = no
    ai_maybe = no
    is_shown = {
        scope:actor = {
            has_trait = mangekyosharingan_4
            NOT = { has_character_flag = used_tsukuyomi }
        }
    }
    on_send = {
        scope:actor = {
            trigger_event = MangekyoEvents.003
            add_character_flag = {
                flag = used_tsukuyomi
                months = 6
            }
        }
    }
}

#POTS Regular Interactions

obtain_mangekyo_sharingan_interaction = {
    category = interaction_category_hostile
    common_interaction = no
    ai_maybe = no
    is_shown = {
        scope:actor = {
            has_trait = threetomoe
        }
        scope:recipient = {
            is_close_family_of = scope:actor
        }
    }
    on_send = {
        scope:actor = {
            trigger_event = MangekyoEvents.004
        }
    }
}

train_sharingan_level_one_interaction = {
	category = interaction_category_hostile
	common_interaction = no
	desc = train_sharingan_level_one_interaction_desc

	is_shown = {
		scope:actor = {
			has_trait = uchihagene
			NOT = { has_character_modifier = train_recently }
			NOT = { has_trait = onetomoe }
			NOT = { has_trait = twotomoe }
			NOT = { has_trait = threetomoe }
			NOT = { has_trait = mangekyosharingan_1 }
			NOT = { has_trait = mangekyosharingan_2 }
			NOT = { has_trait = mangekyosharingan_3 }
			NOT = { has_trait = mangekyosharingan_4 }
			NOT = { has_trait = eternalsharingan }
		}
	}

	on_send = {
		scope:actor = {
			trigger_event = sharingan_level.1
		}
	}
}

train_sharingan_level_two_interaction = {
	category = interaction_category_hostile
	common_interaction = no
	desc = train_sharingan_level_two_interaction_desc

	is_shown = {
		scope:actor = {
			has_trait = onetomoe
			NOT = { has_character_modifier = train_recently }
			NOT = { has_trait = threetomoe }
			NOT = { has_trait = twotomoe }
		}
	}

	on_send = {
		scope:actor = {
			trigger_event = sharingan_level.2
		}
	}
}

train_sharingan_level_three_interaction = {
	category = interaction_category_hostile
	common_interaction = no
	desc = train_sharingan_level_three_interaction_desc

	is_shown = {
		scope:actor = {
			has_trait = twotomoe
			NOT = { has_character_modifier = train_recently }
			NOT = { has_trait = threetomoe }
		}
	}

	on_send = {
		scope:actor = {
			trigger_event = sharingan_level.3
		}
	}
}

obtain_eternal_light_interaction = {
	category = interaction_category_hostile
	common_interaction = no
	desc = obtain_eternal_light_interaction_desc

	is_shown = {
		scope:actor = {
            is_close_family_of = scope:recipient
            has_mangekyosharingan = yes
		}
        scope:recipient = {
            is_close_family_of = scope:actor
            has_mangekyosharingan = yes
        }
	}

	on_send = {
		scope:actor = {
			trigger_event = sharingan_level.4
		}
	}
}